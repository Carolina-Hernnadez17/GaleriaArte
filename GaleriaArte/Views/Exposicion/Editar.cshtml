@model GaleriaArte.Models.exposicion

@{
    ViewData["Title"] = "Editar Exposición";
}

<head>
    <link rel="stylesheet" href="/css_C/ExpocisionStyle.css" asp-append-version="true" />
</head>

<div class="container my-4">
    <h2 class="mb-4">Editar Exposición</h2>

    <form method="post" class="needs-validation" novalidate>
        <input type="hidden" id="id_exposicion" name="id_exposicion" value="@Model.id_exposicion" />

        <div class="mb-3">
            <label for="titulo_exposicion" class="form-label">Título de la Exposición</label>
            <input type="text" id="titulo_exposicion" name="titulo_exposicion" class="form-control" value="@Model.titulo_exposicion" required />
            <div class="invalid-feedback">
                Por favor, ingrese un título.
            </div>
        </div>

        <div class="mb-3">
            <label for="descripcion" class="form-label">Descripción</label>
            <textarea id="descripcion" name="descripcion" class="form-control" required>@Model.descripcion</textarea>
            <div class="invalid-feedback">
                La descripción es obligatoria.
            </div>
        </div>

        <div class="mb-3">
            <label for="fecha_inicio" class="form-label">Fecha de Inicio</label>
            <input type="date" id="fecha_inicio" name="fecha_inicio" class="form-control" value="@Model.fecha_inicio.ToString("yyyy-MM-dd")" required />
            <div class="invalid-feedback">
                Por favor, seleccione una fecha de inicio.
            </div>
        </div>

        <div class="mb-3">
            <label for="fecha_cierre" class="form-label">Fecha de Cierre</label>
            <input type="date" id="fecha_cierre" name="fecha_cierre" class="form-control" value="@Model.fecha_cierre.ToString("yyyy-MM-dd")" required />
            <div class="invalid-feedback">
                Por favor, seleccione una fecha de cierre.
            </div>
        </div>

        <div class="mb-3">
            <label for="id_locacion" class="form-label">Locación</label>
            @Html.DropDownListFor(
                     model => model.id_locacion,
                     new SelectList(ViewBag.Locaciones, "id_Locacion", "ciudad"),
                     "Seleccione una locación",
                     new { @class = "form-control", @required = "required" }
                     )
        </div>

        <div class="mb-3">
            <label for="estado" class="form-label">Estado</label>
            @Html.DropDownListFor(
                     model => model.estado,
                     new SelectList(new List<SelectListItem>
            {
            new SelectListItem { Text = "Activa", Value = "true" },
            new SelectListItem { Text = "Finalizada", Value = "false" }
            }, "Value", "Text"),
                     new { @class = "form-control", @required = "required" }
                     )
        </div>

        <div class="d-flex justify-content-start mt-4">
            <button type="submit" class="btn btn-primary me-3">Guardar</button>
            <a href="javascript:void(0);" class="btn btn-secondary" id="cancelarBtn">Cancelar</a>
        </div>
    </form>
</div>

<script>
    document.getElementById("cancelarBtn").addEventListener("click", function (event) {
        event.preventDefault();
            if (confirm("¿Estás seguro de que deseas cancelar? Todos los cambios no guardados se perderán.")) {
            window.location.href = "@Url.Action("exposicion_admin")";
            }
        });
</script>
